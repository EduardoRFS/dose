%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Copyright (C) 2010-2012  Pietro Abate <pietro.abate@pps.jussieu.fr>   %
%                           Ralf Treinen <ralf.treinen@pps.jussieu.fr>   %
%                           UnversitÃ© Paris-Diderot                      %
%                                                                        %
%  This documentation is free software: you can redistribute it and/or   %
%  modify it under the terms of the GNU General Public License as        %
%  published by the Free Software Foundation, either version 3 of the    %
%  License, or (at your option) any later version.                       %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Tips and Tricks}
\label{sec:tricks}
\subsection{Encoding checks involving several package}
\debcheck{} only tests whether any package in the foreground set is
installable. However, sometimes one is interested in knowing whether
several packages are co-installable, that is whether there exists an
an installation set that contains all these packages. One might also
be interested in an installation that does \emph{not} contain a certain
package.

This can be encoded by creating a pseudo-package that
represents the query. 

\begin{example}
  We wish to know whether it is possible to install at the same time
  \texttt{a} and \texttt{b}, the latter in some version $\geq 42$, but
  without installing c. We create a pseudo package like this:
\begin{verbatim}
Package: query
Version: 1
Architecture: all
Depends: a, b(>= 42)
Conflicts: c
\end{verbatim}
Then we check for installability of that package with respect to the
repository:
\begin{verbatim}
echo "Package: query\nVersion: 1\nArchitecture: all\nDepends: a, b(>=42)\nConflicts: c" | dose-debcheck --bg=repository
\end{verbatim}
\end{example}

\subsection{Parsing \debcheck's output in Python}
Debcheck's output can be easily parsed from a Python program by using
the YAML parser (needs the debian package\texttt{python-yaml}).

\begin{example}
  If you have run debcheck with the option \texttt{-f} (and possibly
  with the \texttt{-s} option in addition) you may obtain a report
  containing one non-installable package (name and version) per line
  like this:
  
\begin{verbatim}
import yaml

doc = yaml.load(file("output-of-distcheck", 'r'))
if doc['report'] is not None:
  for p in doc['report']:
    if p ['status'] == "broken":
      print "%s %s is broken" (p['package'], p['version'])
\end{verbatim}
\end{example}


