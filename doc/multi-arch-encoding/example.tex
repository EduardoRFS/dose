\subsection{Examples}

In the following examples, \texttt{arch1} is the native architecture and
\texttt{arch2} is the foreign architecture. \texttt{Installed: yes} means that
the package has to be considered as installed on the system.

\subsection{Multi Arch : None}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Provides: a
    Conflicts: a

    Package: a1
    Architecture: arch2
    Version: 1
    Provides: a
    Conflicts: a
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch2:a1
    version: 2
    conflicts: arch1:a, arch2:a, arch2:a1, a1
    provides: a1

    package: arch1:a1
    version: 2
    conflicts: arch1:a, arch2:a, arch1:a1, a1
    provides: a1
    \end{lstlisting}
  \end{minipage}
\caption{packages a1:arch1 and a1:arch2 cannot be installed together.}
\label{fig:arch-none}
\end{figure}

\subsection{Multi Arch : Allowed}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Multi-Arch: allowed
    Installed: yes

    Package: a1
    Architecture: arch2
    Version: 1
    Multi-Arch: allowed

    Package: a2
    Architecture: arch2
    Version: 1
    Depends: a1:any
    Multi-Arch: same
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch2:a1
    version: 2
    conflicts: arch2:a1, a1
    provides: a1, a1:any

    package: arch2:a2
    version: 2
    depends: a1:any
    conflicts: arch2:a2, arch1:a2 != 2
    provides: a2

    package: arch1:a1
    version: 2
    installed: true
    conflicts: arch1:a1, a1
    provides: a1, a1:any
    \end{lstlisting}
  \end{minipage}

\caption{Package a2:arch2 can be installed because the package a1:arch1
is currently installed.}
\label{fig:arch-allowed}
\end{figure}

\subsection{Multi Arch : Foreign}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Multi-Arch: foreign

    Package: a1
    Architecture: arch2
    Version: 1
    Multi-Arch: foreign

    Package: a2
    Architecture: arch2
    Version: 1
    Depends: a1
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch2:a1
    version: 2
    conflicts: arch2:a1, a1
    provides: a1, arch1:a1 = 2

    package: arch1:a1
    version: 2
    conflicts: arch1:a1 , a1
    provides: a1, arch2:a1 = 2
    \end{lstlisting}
  \end{minipage}
\caption{Packages a1:arch1 and a2:arch2 are not coinstallable, but
package a2:arch2 can be installed}
\label{fig:arch-foreign}
\end{figure}

\subsection{Multi Arch : Same}

Packages a1:arch1 and a1:arch2 are coinstallable. Self conflicts are
ignored.

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Conflicts: a1
    Multi-Arch: same

    Package: a1
    Architecture: arch2
    Version: 1
    Conflicts: a2
    Multi-Arch: same
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch2:a1
    version: 2
    conflicts: arch2:a1, arch1:a1 != 2
    provides: a1

    package: arch1:a1
    version: 2
    conflicts: arch1:a1, arch2:a1 != 2
    provides: a1
    \end{lstlisting}
  \end{minipage}
\caption{Packages a1:arch1 and a1:arch2 are coinstallable. Self
conflicts are ignored.}
\label{fig:arch-same-1}
\end{figure}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same

    Package: a1
    Architecture: arch2
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch1:a1
    version: 2
    conflicts: arch1:a1 , arch2:a1 != 2
    provides: a1

    package: arch2:a1
    version: 2
    conflicts: arch2:a1 , arch1:a1 != 2
    provides: a1
    \end{lstlisting}
  \end{minipage}
\caption{implicit self conflicts declared thought virtual packages are
ignored. Packages a1:arch1 and a1:arch2 are coinstallable}
\label{fig:arch-same-2}
\end{figure}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same

    Package: a1
    Architecture: arch2
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same

    Package: a2
    Architecture: arch2
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch1:a1
    version: 2
    conflicts: arch1:a2, arch2:a2, 
     arch1:a1, arch2:a1 != 2
    provides: a1 

    package: arch2:a2
    version: 2
    conflicts: arch1:a1, arch2:a1, 
     arch2:a2, arch1:a2 != 2
    provides: a2

    package: arch2:a1
    version: 2
    conflicts: arch1:a2, arch2:a2, 
     arch2:a1, arch1:a1 != 2
    provides: a1
    \end{lstlisting}
  \end{minipage}
\caption{packages a1:arch1 and a1:arch2 are not coinstallable with
package a2:arch2.}
\label{fig:arch-same-3}
\end{figure}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    Package: a1
    Architecture: arch1
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: same

    Package: a1
    Architecture: arch2
    Version: 1
    Provides: a
    Conflicts: a
    Multi-Arch: none
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]
    package: arch1:a1
    version: 2
    conflicts: arch1:a1 , arch2:a1 != 2
    provides: a1

    package: arch2:a1
    version: 2
    conflicts: arch1:a, arch2:a, arch2:a1, a1
    provides: a1
    \end{lstlisting}
  \end{minipage}
\caption{Coinstallability is possible only if all interested packages
are declared multi arch same.  Packages a1:arch1 and a1:arch2 are not
coinstallable}
\label{fig:arch-same-4}
\end{figure}

\begin{figure}[h]
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=debctrl]
    \end{lstlisting}
  \end{minipage}
  \begin{minipage}[b]{0.45\linewidth}
    \begin{lstlisting}[style=cudf]

    \end{lstlisting}
  \end{minipage}
\caption{}
\label{fig:}
\end{figure}


